pkgname=sliver
pkgver=1.6.6
pkgrel=1
pkgdesc="Sliver is a an opensource C2 framework designed by bishop fox"
url="https://github.com/BishopFox/sliver"
arch=('aarch64')
optdepends=()
license=('BSD-3-Clause')
provides=("${pkgname}")
install=
source=(
    "https://github.com/BishopFox/sliver/releases/download/v${pkgver}/sliver-client_linux-arm64"
    "https://github.com/BishopFox/sliver/releases/download/v${pkgver}/sliver-server_linux-arm64"
)
sha512sums=('df817d2fa55811f37099a7d4179eee49d58e36a61aff726340282540427b7531cbfaf712f299cb9f7ba0cdf0e7d25fa7d18f3eb9344bab8a4a112bf7548bd1a9'
            'e11a7482b70cd94407eb6540fc213071a42a0cf3b6964b8a94a27fb008665307264b3d1637ee40dac73325b54169654325a1993fb84a1e0a90b4f56b428917c8')

prepare() {
    chmod +x ./sliver-client_linux-arm64
    chmod +x ./sliver-server_linux-arm64

    ./sliver-client_linux-arm64 completion zsh > _sliver-client
    ./sliver-server_linux-arm64 completion zsh > _sliver-server
}

package() {
    mkdir -p $pkgdir/usr/bin
    mkdir -p $pkgdir/usr/share/zsh/site-functions

    install -Dm 755 sliver-client_linux-arm64 $pkgdir/usr/bin/sliver-client
    install -Dm 755 sliver-server_linux-arm64 $pkgdir/usr/bin/sliver-server

    install -Dm 644 _sliver-client $pkgdir/usr/share/zsh/site-functions/_sliver-client
    install -Dm 644 _sliver-server $pkgdir/usr/share/zsh/site-functions/_sliver-server
}
