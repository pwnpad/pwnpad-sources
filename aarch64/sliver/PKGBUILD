pkgname=sliver
pkgver=1.6.10
pkgrel=1
pkgdesc="Sliver is a an opensource C2 framework designed by bishop fox"
url="https://github.com/BishopFox/sliver"
arch=('aarch64')
optdepends=()
license=('BSD-3-Clause')
provides=("${pkgname}")
install=
source=(
    "https://github.com/BishopFox/sliver/releases/download/v${pkgver}/sliver-client_linux-arm64"
    "https://github.com/BishopFox/sliver/releases/download/v${pkgver}/sliver-server_linux-arm64"
)
sha512sums=('1e5787b08f8cd4151a069ff3ade635a7047ed980544004d939ee5fdcf4a5adbf62b2448e1933edccad5b9db3f67899e81325912a79acb8605c9d77de36df2e02'
            '6c38e0246f114609ea4c1e4b4d97b8a78057fc26ba2650ec4f5bc332db77d745c3f57b60d9788831f736ac2dc85b9bd905993e3de709eddf780181b8a12a602e')

prepare() {
    chmod +x ./sliver-client_linux-arm64
    chmod +x ./sliver-server_linux-arm64

    ./sliver-client_linux-arm64 completion zsh > _sliver-client
    ./sliver-server_linux-arm64 completion zsh > _sliver-server
}

package() {
    mkdir -p $pkgdir/usr/bin
    mkdir -p $pkgdir/usr/share/zsh/site-functions

    install -Dm 755 sliver-client_linux-arm64 $pkgdir/usr/bin/sliver-client
    install -Dm 755 sliver-server_linux-arm64 $pkgdir/usr/bin/sliver-server

    install -Dm 644 _sliver-client $pkgdir/usr/share/zsh/site-functions/_sliver-client
    install -Dm 644 _sliver-server $pkgdir/usr/share/zsh/site-functions/_sliver-server
}
