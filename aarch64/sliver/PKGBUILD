pkgname=sliver
pkgver=1.7.1
pkgrel=1
pkgdesc="Sliver is a an opensource C2 framework designed by bishop fox"
url="https://github.com/BishopFox/sliver"
arch=('aarch64')
optdepends=()
license=('BSD-3-Clause')
provides=("${pkgname}")
install=
source=(
    "https://github.com/BishopFox/sliver/releases/download/v${pkgver}/sliver-client_linux-arm64"
    "https://github.com/BishopFox/sliver/releases/download/v${pkgver}/sliver-server_linux-arm64"
)
sha512sums=('67c0531964d7caffcc9189a2a7cee49954d399f7735cb44d7e0196d03d3b288b00a10e65cdc59f1ea897535b078364cc2409e8e87f2f0276062bcdcc93173bd6'
            '5b3700cd8e0aeb696a40979e5fb241025ec430ec409648af3bf988fde1d56f2d8441497928f257cd55d5bd05bb5b1f87d2315fd72ae9707eca669751c5a3703f')

prepare() {
    chmod +x ./sliver-client_linux-arm64
    chmod +x ./sliver-server_linux-arm64

    ./sliver-client_linux-arm64 completion zsh > _sliver-client
    ./sliver-server_linux-arm64 completion zsh > _sliver-server
}

package() {
    mkdir -p $pkgdir/usr/bin
    mkdir -p $pkgdir/usr/share/zsh/site-functions

    install -Dm 755 sliver-client_linux-arm64 $pkgdir/usr/bin/sliver-client
    install -Dm 755 sliver-server_linux-arm64 $pkgdir/usr/bin/sliver-server

    install -Dm 644 _sliver-client $pkgdir/usr/share/zsh/site-functions/_sliver-client
    install -Dm 644 _sliver-server $pkgdir/usr/share/zsh/site-functions/_sliver-server
}
